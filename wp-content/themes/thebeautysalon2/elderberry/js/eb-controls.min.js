function removeIPhoneStyle(e){jQuery.each(jQuery(e),function(){var e=jQuery(this).parents(".iPhoneCheckContainer");e.before(jQuery(this).clone());e.remove()})}function create_uploaders(){jQuery(".upload").fileupload({dataType:"json",url:eb_vars.ajaxurl,submit:function(e,t){datatype=e.currentTarget.dataset.datatype;t.formData={action:"action_upload",name:t.paramName,field:t.fileInput.attr("data-hidden_field"),datatype:datatype}},send:function(e,t){jQuery('input[name="'+t.fileInput.attr("data-hidden_field")+'"]').parents(".upload-container:first").find(".loader").removeClass("hidden")},done:function(e,t){jQuery('input[name="'+t.result.field+'"]').parents(".upload-container:first").find(".loader").addClass("hidden");var n=jQuery('input[name="'+t.result.field+'"]'),r=n.parents(".upload-container").find(".image");n.val(t.result.attachment_id);r.show().find("img").attr("src",t.result.thumb)}})}function action_show_controls(e){var t=jQuery(".eb-tabbed-settings .groups").attr("data-settings"),n=jQuery("#post_ID").val();jQuery.ajax({url:ajaxurl,type:"post",data:{action:"action_show_controls",args:t,post_id:n,template:e},beforeSend:function(){show_settings_loader()},success:function(e){remove_settings_loader();html=jQuery(e);jQuery("#eb-custom-fields .eb-admin").replaceWith(html)}})}function show_settings_loader(){jQuery(".eb-options-form").prepend('<div class="loader-large"></div>')}function remove_settings_loader(){jQuery(".eb-options-form .loader-large").remove()}function switch_section(e){var t=e.parents(".group"),n=e.attr("data-section_id"),r=t.attr("data-group_id");t.find(".tab, .section").removeClass("current");t.find(".tab[data-section_id="+n+"], .section[data-section_id="+n+"]").addClass("current");switch_hash(r+"%7C"+n);proper_height()}function switch_group(e){var t=e.attr("data-group_id"),n=e.parents(".eb-tabbed-settings");n.find(".group, .group-nav li").removeClass("current");n.find(".group-nav li[data-group_id="+t+"], .group[data-group_id="+t+"]").addClass("current");switch_hash(t);proper_height()}function switch_hash(e){window.location.hash=e;jQuery(".eb-options-form").find('input[name="location"]').val(e)}function proper_height(){var e=jQuery(".eb-tabbed-settings .group.current"),t=e.find(".sections"),n=jQuery(".group-nav");element_height=t.height();nav_height=n.height();nav_height>=element_height?e.height(nav_height):e.css("height","auto")}function explode(e,t,n){if(arguments.length<2||typeof e=="undefined"||typeof t=="undefined")return null;if(e===""||e===!1||e===null)return!1;if(typeof e=="function"||typeof e=="object"||typeof t=="function"||typeof t=="object")return{0:""};e===!0&&(e="1");e+="";t+="";var r=t.split(e);if(typeof n=="undefined")return r;n===0&&(n=1);if(n>0)return n>=r.length?r:r.slice(0,n-1).concat([r.slice(n-1).join(e)]);if(-n>=r.length)return[];r.splice(r.length+n);return r}var eb_vars,datatype,ajaxurl;jQuery(document).ready(function(){jQuery("#page_template").change(function(){var e=jQuery(this).val();action_show_controls(e)});jQuery(".eb-datepicker-monthday").datepicker({dateFormat:"MM dd"});jQuery(".control-product_page_content").length>0&&jQuery(".control-product_page_content").product_control();if(window.location.hash!==""){var e=explode("%7C",window.location.hash.substr(1)),t="";if(e.length===1){t=jQuery('.eb-tabbed-settings .group-nav li[data-group_id="'+e[0]+'"]');switch_group(t)}else if(e.length===2){t=jQuery('.eb-tabbed-settings .group-nav li[data-group_id="'+e[0]+'"]');var n=jQuery('.eb-tabbed-settings .group[data-group_id="'+e[0]+'"] .tab[data-section_id="'+e[1]+'"]');switch_group(t);switch_section(n)}}jQuery(".eb-admin :checkbox").iphoneStyle({checkedLabel:"YES",uncheckedLabel:"NO"});jQuery(".eb-tabbed-settings .tabs .tab").live("click",function(){switch_section(jQuery(this))});jQuery(".eb-tabbed-settings .group-nav li").live("click",function(){switch_group(jQuery(this))});jQuery(".tagsinput").tagsInput({defaultText:""});jQuery(".chosen").chosen();jQuery.configureBoxes({useSorting:!1,useCounters:!1});var r=jQuery.farbtastic("#colorpicker"),i=jQuery("#colorpicker");i.prependTo("body");jQuery(".color").each(function(){r.linkTo(this);jQuery(this).css("opacity",.75)}).focus(function(){r.linkTo(this);var e=jQuery(this).offset(),t=jQuery(window).height();e.top=e.top+jQuery(this).outerHeight();e.top+280>t&&(e.top=e.top-245-jQuery(this).outerHeight());i.stop().addClass("startup").offset(e).animate({opacity:1})}).blur(function(){i.animate({opacity:0},function(){i.removeClass("startup")})});create_uploaders();jQuery(document).ajaxSuccess(function(){create_uploaders();jQuery(".chosen").chosenDestroy();jQuery(".chosen").chosen();jQuery.configureBoxes();removeIPhoneStyle(".eb-admin :checkbox");jQuery(".eb-admin :checkbox").iphoneStyle({checkedLabel:"YES",uncheckedLabel:"NO"});jQuery(".color").each(function(){r.linkTo(this);jQuery(this).css("opacity",.75)}).focus(function(){r.linkTo(this);var e=jQuery(this).offset();e.top=e.top+jQuery(this).outerHeight();i.stop().addClass("startup").offset(e).animate({opacity:1})}).blur(function(){i.animate({opacity:0},function(){i.removeClass("startup")})})});jQuery(".add_subgroup").click(function(){var e=jQuery(this).parents(".control:first"),t=e.find(".control-subgroup:first").clone();t.find("input").val("");e.find(".control-subgroups").append(t);t.find(".eb-datepicker, .eb-datepicker-monthday").removeAttr("id").removeClass("hasDatepicker");jQuery(".eb-datepicker").datepicker();jQuery(".eb-datepicker-monthday").datepicker({dateFormat:"MM dd"});jQuery(".eb-datepicker").datepicker("refresh");jQuery(".eb-datepicker-monthday").datepicker("refresh")});jQuery(".remove_subgroup").live("click",function(){var e=jQuery(this).parents(".control:first"),t=e.find(".control-subgroup").length,n=jQuery(this).parents(".control-subgroup:first");if(t>1)n.slideUp(function(){n.remove()});else{newgroup=n.clone();newgroup.find("*").val("");newgroup.insertAfter(n);n.remove()}});jQuery(".remove-image").live("click",function(){if(jQuery(this).attr("data-datatype")=="option"){var e=jQuery(this).attr("data-option");jQuery.ajax({url:eb_vars.ajaxurl,type:"post",data:{action:"action_remove_image",option:e}})}jQuery(this).parents(".upload-container ").find('input[type="file"]').next().val("");jQuery(this).parents(".image").hide().find("img").attr("src","");return!1});jQuery(".eb-datepicker").datepicker();jQuery(".image-selector .image").click(function(){jQuery(this).hasClass(".selected")?jQuery(this).find(".select-text").text("Click to select"):jQuery(this).find(".select-text").text("Click to deselect");jQuery(this).toggleClass("selected");var e=jQuery(".image-selector .image.selected"),t=[];jQuery.each(jQuery(e),function(e){t[e]=jQuery(this).attr("data-id")});jQuery(this).parents(".image-selector").find("input").val(t.join(","))})});jQuery.fn.chosenDestroy=function(){jQuery(this).show().removeClass("chzn-done").removeAttr("id");jQuery(this).next().remove();jQuery(".chzn-container").remove();return jQuery(this)};