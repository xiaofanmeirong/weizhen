(function(){var e,t=Array.prototype.slice;e=function(){function e(t,n){var r,i,s;this.elem=jQuery(t);i=jQuery.extend({},e.defaults,n);for(r in i){s=i[r];this[r]=s}this.elem.data(this.dataName,this);this.wrapCheckboxWithDivs();this.attachEvents();this.disableTextSelection();this.resizeHandle&&this.optionallyResize("handle");this.resizeContainer&&this.optionallyResize("container");this.initialPosition()}e.prototype.isDisabled=function(){return this.elem.is(":disabled")};e.prototype.wrapCheckboxWithDivs=function(){this.elem.wrap("<div class='"+this.containerClass+"' />");this.container=this.elem.parent();this.offLabel=jQuery("<label class='"+this.labelOffClass+"'>\n  <span>"+this.uncheckedLabel+"</span>\n</label>").appendTo(this.container);this.offSpan=this.offLabel.children("span");this.onLabel=jQuery("<label class='"+this.labelOnClass+"'>\n  <span>"+this.checkedLabel+"</span>\n</label>").appendTo(this.container);this.onSpan=this.onLabel.children("span");return this.handle=jQuery("<div class='"+this.handleClass+"'>\n  <div class='"+this.handleRightClass+"'>\n    <div class='"+this.handleCenterClass+"' />\n  </div>\n</div>").appendTo(this.container)};e.prototype.disableTextSelection=function(){if(jQuery.browser.msie)return jQuery([this.handle,this.offLabel,this.onLabel,this.container]).attr("unselectable","on")};e.prototype._getDimension=function(e,t){return jQuery.fn.actual!=null?e.actual(t):e[t]()};e.prototype.optionallyResize=function(e){var t,n,r;r=this._getDimension(this.onLabel,"width");n=this._getDimension(this.offLabel,"width");if(e==="container"){t=r>n?r:n;t+=this._getDimension(this.handle,"width")+this.handleMargin;return this.container.css({width:t})}t=r>n?r:n;return this.handle.css({width:t})};e.prototype.onMouseDown=function(t){var n;t.preventDefault();if(this.isDisabled())return;n=t.pageX||t.originalEvent.changedTouches[0].pageX;e.currentlyClicking=this.handle;e.dragStartPosition=n;return e.handleLeftOffset=parseInt(this.handle.css("left"),10)||0};e.prototype.onDragMove=function(t,n){var r,i;if(e.currentlyClicking!==this.handle)return;i=(n+e.handleLeftOffset-e.dragStartPosition)/this.rightSide;i<0&&(i=0);i>1&&(i=1);r=i*this.rightSide;this.handle.css({left:r});this.onLabel.css({width:r+this.handleRadius});this.offSpan.css({marginRight:-r});return this.onSpan.css({marginLeft:-(1-i)*this.rightSide})};e.prototype.onDragEnd=function(t,n){var r;if(e.currentlyClicking!==this.handle)return;if(this.isDisabled())return;if(e.dragging){r=(n-e.dragStartPosition)/this.rightSide;this.elem.prop("checked",r>=.5)}else this.elem.prop("checked",!this.elem.prop("checked"));e.currentlyClicking=null;e.dragging=null;return this.didChange()};e.prototype.refresh=function(){return this.didChange()};e.prototype.didChange=function(){var e;typeof this.onChange=="function"&&this.onChange(this.elem,this.elem.prop("checked"));if(this.isDisabled()){this.container.addClass(this.disabledClass);return!1}this.container.removeClass(this.disabledClass);e=this.elem.prop("checked")?this.rightSide:0;this.handle.animate({left:e},this.duration);this.onLabel.animate({width:e+this.handleRadius},this.duration);this.offSpan.animate({marginRight:-e},this.duration);return this.onSpan.animate({marginLeft:e-this.rightSide},this.duration)};e.prototype.attachEvents=function(){var e,t,n;n=this;e=function(e){return n.onGlobalMove.apply(n,arguments)};t=function(r){n.onGlobalUp.apply(n,arguments);jQuery(document).unbind("mousemove touchmove",e);return jQuery(document).unbind("mouseup touchend",t)};this.elem.change(function(){return n.refresh()});return this.container.bind("mousedown touchstart",function(r){n.onMouseDown.apply(n,arguments);jQuery(document).bind("mousemove touchmove",e);return jQuery(document).bind("mouseup touchend",t)})};e.prototype.initialPosition=function(){var e,t;e=this._getDimension(this.container,"width");this.offLabel.css({width:e-this.containerRadius});t=this.containerRadius+1;jQuery.browser.msie&&jQuery.browser.version<7&&(t-=3);this.rightSide=e-this._getDimension(this.handle,"width")-t;if(this.elem.is(":checked")){this.handle.css({left:this.rightSide});this.onLabel.css({width:this.rightSide+this.handleRadius});this.offSpan.css({marginRight:-this.rightSide})}else{this.onLabel.css({width:0});this.onSpan.css({marginLeft:-this.rightSide})}if(this.isDisabled())return this.container.addClass(this.disabledClass)};e.prototype.onGlobalMove=function(t){var n;if(!!this.isDisabled()||!e.currentlyClicking)return;t.preventDefault();n=t.pageX||t.originalEvent.changedTouches[0].pageX;!e.dragging&&Math.abs(e.dragStartPosition-n)>this.dragThreshold&&(e.dragging=!0);return this.onDragMove(t,n)};e.prototype.onGlobalUp=function(t){var n;if(!e.currentlyClicking)return;t.preventDefault();n=t.pageX||t.originalEvent.changedTouches[0].pageX;this.onDragEnd(t,n);return!1};e.defaults={duration:200,checkedLabel:"ON",uncheckedLabel:"OFF",resizeHandle:!0,resizeContainer:!0,disabledClass:"iPhoneCheckDisabled",containerClass:"iPhoneCheckContainer",labelOnClass:"iPhoneCheckLabelOn",labelOffClass:"iPhoneCheckLabelOff",handleClass:"iPhoneCheckHandle",handleCenterClass:"iPhoneCheckHandleCenter",handleRightClass:"iPhoneCheckHandleRight",dragThreshold:5,handleMargin:15,handleRadius:4,containerRadius:5,dataName:"iphoneStyle",onChange:function(){}};return e}();jQuery.iphoneStyle=this.iOSCheckbox=e;jQuery.fn.iphoneStyle=function(){var n,r,i,s,o,u,a,f,l,c,h,p;n=1<=arguments.length?t.call(arguments,0):[];i=(l=(c=n[0])!=null?c.dataName:void 0)!=null?l:e.defaults.dataName;h=this.filter(":checkbox");for(a=0,f=h.length;a<f;a++){r=h[a];s=jQuery(r).data(i);if(s!=null){o=n[0],u=2<=n.length?t.call(n,1):[];(p=s[o])!=null&&p.apply(s,u)}else new e(r,n[0])}return this};jQuery.fn.iOSCheckbox=function(e){var t;e==null&&(e={});t=jQuery.extend({},e,{resizeHandle:!1,disabledClass:"iOSCheckDisabled",containerClass:"iOSCheckContainer",labelOnClass:"iOSCheckLabelOn",labelOffClass:"iOSCheckLabelOff",handleClass:"iOSCheckHandle",handleCenterClass:"iOSCheckHandleCenter",handleRightClass:"iOSCheckHandleRight",dataName:"iOSCheckbox"});return this.iphoneStyle(t)}}).call(this);