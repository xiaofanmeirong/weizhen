/*
*       Developed by Justin Mead
*       Â©2011 MeadMiracle
*		www.meadmiracle.com / meadmiracle@gmail.com
*       Version 1.3
*       Testing: IE8/Windows XP
*                Firefox/Windows XP
*                Chrome/Windows XP
*       Licensed under the Creative Commons GPL http://creativecommons.org/licenses/GPL/2.0/
*/(function(e){function s(t){var n=e("#"+t.view+" option").size(),r=e("#"+t.storage+" option").size();e("#"+t.counter).text("Showing "+n+" of "+(n+r))}function o(n){var r=n.index,i;t[r].useFilters?i=e("#"+n.filter).val().toString().toLowerCase():i="";e("#"+n.view+" option").filter(function(t){var n=e(this).text().toString().toLowerCase();return n.indexOf(i)==-1}).appendTo("#"+n.storage);e("#"+n.storage+" option").filter(function(t){var n=e(this).text().toString().toLowerCase();return n.indexOf(i)!=-1}).appendTo("#"+n.view);try{e("#"+n.view+" option").removeAttr("selected")}catch(o){}t[r].useSorting&&u(n);t[r].useCounters&&s(n)}function u(t){var n=e("#"+t.view+" option");n.sort(i[t.index]);e("#"+t.view).empty().append(n)}function a(n,r){p(t[n.index])?e("#"+n.view+" option:selected").appendTo("#"+r.view):e("#"+n.view+" option:selected:not([class*=copiedOption])").clone().appendTo("#"+r.view).end().end().addClass("copiedOption");try{e("#"+n.view+" option,#"+r.view+" option").removeAttr("selected")}catch(i){}o(r);t[n.index].useCounters&&s(n)}function f(n,r){p(t[n.index])?e("#"+n.view+" option").appendTo("#"+r.view):e("#"+n.view+" option:not([class*=copiedOption])").clone().appendTo("#"+r.view).end().end().addClass("copiedOption");try{e("#"+n.view+" option,#"+r.view+" option").removeAttr("selected")}catch(i){}o(r);t[n.index].useCounters&&s(n)}function l(n,r){e("#"+r.view+" option.copiedOption").add("#"+r.storage+" option.copiedOption").remove();try{e("#"+n.view+" option:selected").appendTo("#"+r.view).removeAttr("selected")}catch(i){}e("#"+n.view+" option").add("#"+n.storage+" option").clone().addClass("copiedOption").appendTo("#"+r.view);o(r);t[n.index].useCounters&&s(n)}function c(n,r){e("#"+r.view+" option.copiedOption").add("#"+r.storage+" option.copiedOption").remove();try{e("#"+n.storage+" option").clone().addClass("copiedOption").add("#"+n.view+" option").appendTo("#"+r.view).removeAttr("selected")}catch(i){}o(r);t[n.index].useCounters&&s(n)}function h(n){e("#"+n.filter).val("");e("#"+n.storage+" option").appendTo("#"+n.view);try{e("#"+n.view+" option").removeAttr("selected")}catch(r){}t[n.index].useSorting&&u(n);t[n.index].useCounters&&s(n)}function p(e){return e.transferMode=="move"}var t=new Array,n=new Array,r=new Array,i=new Array;e.configureBoxes=function(d){var v=t.push({box1View:"box1View",box1Storage:"box1Storage",box1Filter:"box1Filter",box1Clear:"box1Clear",box1Counter:"box1Counter",box2View:"box2View",box2Storage:"box2Storage",box2Filter:"box2Filter",box2Clear:"box2Clear",box2Counter:"box2Counter",to1:"to1",allTo1:"allTo1",to2:"to2",allTo2:"allTo2",transferMode:"move",sortBy:"text",useFilters:!0,useCounters:!0,useSorting:!0,selectOnSubmit:!0});v--;e.extend(t[v],d);n.push({view:t[v].box1View,storage:t[v].box1Storage,filter:t[v].box1Filter,clear:t[v].box1Clear,counter:t[v].box1Counter,index:v});r.push({view:t[v].box2View,storage:t[v].box2Storage,filter:t[v].box2Filter,clear:t[v].box2Clear,counter:t[v].box2Counter,index:v});t[v].sortBy=="text"?i.push(function(e,t){var n=e.text.toLowerCase(),r=t.text.toLowerCase();return n<r?-1:n>r?1:0}):i.push(function(e,t){var n=e.value.toLowerCase(),r=t.value.toLowerCase();return n<r?-1:n>r?1:0});if(t[v].useFilters){e("#"+n[v].filter).keyup(function(){o(n[v])});e("#"+r[v].filter).keyup(function(){o(r[v])});e("#"+n[v].clear).click(function(){h(n[v])});e("#"+r[v].clear).click(function(){h(r[v])})}if(p(t[v])){e("#"+r[v].view).dblclick(function(){a(r[v],n[v])});e("#"+t[v].to1).click(function(){a(r[v],n[v])});e("#"+t[v].allTo1).click(function(){f(r[v],n[v])})}else{e("#"+r[v].view).dblclick(function(){l(r[v],n[v])});e("#"+t[v].to1).click(function(){l(r[v],n[v])});e("#"+t[v].allTo1).click(function(){c(r[v],n[v])})}e("#"+n[v].view).dblclick(function(){a(n[v],r[v])});e("#"+t[v].to2).click(function(){a(n[v],r[v])});e("#"+t[v].allTo2).click(function(){f(n[v],r[v])});if(t[v].useCounters){s(n[v]);s(r[v])}if(t[v].useSorting){u(n[v]);u(r[v])}e("#"+n[v].storage+",#"+r[v].storage).css("display","none");t[v].selectOnSubmit&&e("#"+t[v].box2View).closest("form").submit(function(){e("#"+t[v].box2View).children("option").attr("selected","selected")})}})(jQuery);