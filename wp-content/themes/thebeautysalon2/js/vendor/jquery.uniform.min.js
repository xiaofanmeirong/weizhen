/*

Uniform v1.8.0+f
Copyright Â© 2009 Josh Pyles / Pixelmatrix Design LLC
http://pixelmatrixdesign.com

Requires jQuery 1.3 or newer

Much thanks to Thomas Reynolds and Buck Wilson for their help and advice on
this.

Disabling text selection is made possible by Mathias Bynens
<http://mathiasbynens.be/> and his noSelect plugin.
<http://github.com/mathiasbynens/noSelect-jQuery-Plugin>.

Also, thanks to David Kaneda and Eugene Bond for their contributions to the
plugin.

This version (+f) is from fidian's forked repository until the changes can
get merged upstream.  See https://github.com/fidian/uniform

License:
MIT License - http://www.opensource.org/licenses/mit-license.php

Enjoy!

*//*global jQuery, window, document*/(function(e,t){"use strict";function n(t){return t?e("<span />").text(t).html():""}function r(e,t){var n,r;for(n in t)if(t.hasOwnProperty(n)){r=n.replace(/ |$/g,".uniform");e.bind(n,t[n])}}function i(e,t,n){r(e,{focus:function(){t.addClass(n.focusClass)},blur:function(){t.removeClass(n.focusClass);t.removeClass(n.activeClass)},mouseenter:function(){t.addClass(n.hoverClass)},mouseleave:function(){t.removeClass(n.hoverClass);t.removeClass(n.activeClass)},"mousedown touchbegin":function(){e.is(":disabled")||t.addClass(n.activeClass)},"mouseup touchend":function(){t.removeClass(n.activeClass)}})}function s(e){var n;if(e[0].multiple)return!0;n=e.attr("size");return n===t||n<=1?!1:!0}function o(e,t,n){var r=e.val();if(r==="")r=n.fileDefaultHtml;else{r=r.split(/[\/\\]+/);r=r[r.length-1]}t.text(r)}function u(e,t){e.removeClass(t.hoverClass+" "+t.focusClass+" "+t.activeClass)}function a(e,t,n){n?e.addClass(t):e.removeClass(t)}function f(e,t,n){var r=t.is(":checked");t.prop?t.prop("checked",r):r?t.attr("checked","checked"):t.removeAttr("checked");a(e,n.checkedClass,r)}function l(e,t,n){a(e,n.disabledClass,t.is(":disabled"))}function c(e,t,n){switch(n){case"after":e.after(t);return e.next();case"before":e.before(t);return e.prev();case"wrap":e.wrap(t);return e.parent()}return null}function h(t,n,r){var i,s;r||(r={});r=e.extend({bind:{},css:null,divClass:null,divWrap:"wrap",spanClass:null,spanHtml:null,spanWrap:"wrap"},r);i=e("<div />");s=e("<span />");n.autoHide&&!t.is(":visible")&&i.hide();r.divClass&&i.addClass(r.divClass);r.spanClass&&s.addClass(r.spanClass);n.useID&&t.attr("id")&&i.attr("id",n.idPrefix+"-"+t.attr("id"));r.spanHtml&&s.html(r.spanHtml);i=c(t,i,r.divWrap);s=c(t,s,r.spanWrap);r.css&&t.css(r.css);l(i,t,n);return{div:i,span:s}}e.uniform={defaults:{activeClass:"active",autoHide:!0,buttonClass:"button",checkboxClass:"checker",checkedClass:"checked",disabledClass:"disabled",fileButtonClass:"action",fileButtonHtml:"Choose File",fileClass:"uploader",fileDefaultHtml:"No file selected",filenameClass:"filename",focusClass:"focus",hoverClass:"hover",idPrefix:"uniform",radioClass:"radio",resetDefaultHtml:"Reset",resetSelector:!1,selectAutoWidth:!1,selectClass:"selector",submitDefaultHtml:"Submit",useID:!0},elements:[]};var p=!0,d=[{match:function(e){return e.is("button, :submit, :reset, a, input[type='button']")},apply:function(t,s){var o,a,f;a=s.submitDefaultHtml;t.is(":reset")&&(a=s.resetDefaultHtml);t.is("a, button")?a=t.html()||a:t.is(":submit, :reset, input[type=button]")&&(a=n(t.attr("value"))||a);f=h(t,s,{css:{display:"none"},divClass:s.buttonClass,spanHtml:a});o=f.div;i(t,o,s);r(o,{"click touchend":function(n){var r;if(e(n.target).is("span, div"))if(t[0].dispatchEvent){r=document.createEvent("MouseEvents");r.initEvent("click",!0,!0);t[0].dispatchEvent(r)}else t.click()}});e.uniform.noSelect(o);return{remove:function(){return t.unwrap().unwrap()},update:function(){u(o,s);l(o,t,s)}}}},{match:function(e){return e.is(":checkbox")},apply:function(e,t){var n,s,o;n=h(e,t,{css:{opacity:0},divClass:t.checkboxClass});s=n.div;o=n.span;i(e,s,t);r(e,{"click touchend":function(){f(o,e,t)}});f(o,e,t);return{remove:function(){return e.unwrap().unwrap()},update:function(){u(s,t);o.removeClass(t.checkedClass);f(o,e,t);l(s,e,t)}}}},{match:function(e){return e.is(":file")},apply:function(t,n){function d(){o(t,f,n)}var s,a,f,p;s=h(t,n,{css:{opacity:0},divClass:n.fileClass,spanClass:n.fileButtonClass,spanHtml:n.fileButtonHtml,spanWrap:"after"});a=s.div;p=s.span;f=e("<span />").html(n.fileDefaultHtml);f.addClass(n.filenameClass);f=c(t,f,"after");t.attr("size")||t.attr("size",a.width()/10);i(t,a,n);d();e.browser.msie?r(t,{click:function(){t.trigger("change");setTimeout(d,0)}}):r(t,{change:d});e.uniform.noSelect(f);e.uniform.noSelect(p);return{remove:function(){t.siblings("span").remove();t.unwrap();return t},update:function(){u(a,n);o(t,f,n);l(a,t,n)}}}},{match:function(e){if(e.is("input")){var t=e.attr("type").toLowerCase(),n=" color date datetime datetime-local email month number password search tel text time url week ";return n.indexOf(" "+t+" ")>=0}return!1},apply:function(e){var t=e.attr("type");e.addClass(t);return{remove:function(){e.removeClass(t)},update:function(){}}}},{match:function(e){return e.is(":radio")},apply:function(t,n){var s,o,a;s=h(t,n,{css:{opacity:0},divClass:n.radioClass});o=s.div;a=s.span;i(t,o,n);r(t,{"click touchend":function(){var r=n.radioClass.split(" ")[0],i="."+r+" span."+n.checkedClass+":has([name='"+t.attr("name")+"'])";e(i).each(function(){var t=e(this),r=t.find(":radio");f(t,r,n)});f(a,t,n)}});f(a,t,n);return{remove:function(){return t.unwrap().unwrap()},update:function(){u(o,n);f(a,t,n);l(o,t,n)}}}},{match:function(e){var t;return e.is("select")&&!s(e)?!0:!1},apply:function(t,n){var s,o,a,f,c;f=t.width();s=h(t,n,{css:{opacity:0,left:"2px",width:f+32+"px"},divClass:n.selectClass,spanHtml:(t.find(":selected:first")||t.find("option:first")).html(),spanWrap:"before"});o=s.div;a=s.span;if(n.selectAutoWidth){o.width(e("<div />").width()-e("<span />").width()+f+25);c=parseInt(o.css("paddingLeft"),10);a.width(f-c-15);t.width(f+c);t.css("min-width",f+c+"px");o.width(f+c)}else{c=t.width();o.width(c);a.width(c-25)}i(t,o,n);r(t,{change:function(){a.html(t.find(":selected").html());o.removeClass(n.activeClass)},"click touchend":function(){var e=t.find(":selected").html();a.html()!==e&&t.trigger("change")},keyup:function(){a.html(t.find(":selected").html())}});e.uniform.noSelect(a);return{remove:function(){t.siblings("span").remove();t.unwrap();return t},update:function(){u(o,n);a.html(t.find(":selected").html());l(o,t,n)}}}},{match:function(e){var t;return e.is("select")&&s(e)?!0:!1},apply:function(e){e.addClass("uniform-multiselect");return{remove:function(){e.removeClass("uniform-multiselect")},update:function(){}}}},{match:function(e){return e.is("textarea")},apply:function(e){e.addClass("uniform");return{remove:function(){e.removeClass("uniform")},update:function(){}}}}];e.browser.msie&&e.browser.version<7&&(p=!1);e.fn.uniform=function(t){var n=this;t=e.extend({},e.uniform.defaults,t);t.resetSelector!==!1&&e(t.resetSelector).mouseup(function(){window.setTimeout(function(){e.uniform.update(n)},10)});return this.each(function(){var n=e(this),r,i,s;n.data("uniformed")&&e.uniform.update(n);if(n.data("uniformed")||!p)return;for(r=0;r<d.length;r+=1){i=d[r];if(i.match(n,t)){s=i.apply(n,t);n.data("uniformed",s);e.uniform.elements.push(n.get(0));return}}})};e.uniform.restore=function(n){n===t&&(n=e.uniform.elements);e(n).each(function(){var t=e(this),n,r;r=t.data("uniformed");if(!r)return;r.remove();t.unbind(".uniform");n=e.inArray(this,e.uniform.elements);n>=0&&e.uniform.elements.splice(n,1);t.removeData("uniformed")})};e.uniform.noSelect=function(t){function n(){return!1}e(t).each(function(){this.onselectstart=this.ondragstart=n;e(this).mousedown(n).css({MozUserSelect:"none"})})};e.uniform.update=function(n){n===t&&(n=e.uniform.elements);e(n).each(function(){var t=e(this),n;n=t.data("uniformed");if(!n)return;n.update(t,n.options)})}})(jQuery);